const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CQgnmMPp.js","assets/index-BKJYp208.js","assets/index-DoH7Brms.css","assets/leaflet-src-aavnLwlm.js","assets/leaflet-lDzrbhio.css"])))=>i.map(i=>d[i]);
import{r as c,j as e,_ as b}from"./index-BKJYp208.js";let x,h,j,f,v,p,u,w=!1;const _=async()=>{var i,s,n,a,r,m;if(w)return!0;try{const[t,l]=await Promise.all([b(()=>import("./index-CQgnmMPp.js"),__vite__mapDeps([0,1,2,3])),b(()=>import("./leaflet-src-aavnLwlm.js").then(o=>o.l),__vite__mapDeps([3,1,2]))]);if(await b(()=>Promise.resolve({}),__vite__mapDeps([4])),x=t.MapContainer||((i=t.default)==null?void 0:i.MapContainer),h=t.TileLayer||((s=t.default)==null?void 0:s.TileLayer),j=t.Marker||((n=t.default)==null?void 0:n.Marker),f=t.useMapEvents||((a=t.default)==null?void 0:a.useMapEvents),v=t.Popup||((r=t.default)==null?void 0:r.Popup),p=t.useMap||((m=t.default)==null?void 0:m.useMap),u=l.default||l,!x||typeof x!="function")throw new Error("MapContainer is not a valid function");if(!h||typeof h!="function")throw new Error("TileLayer is not a valid function");return u&&u.Icon&&u.Icon.Default&&(delete u.Icon.Default.prototype._getIconUrl,u.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"})),w=!0,!0}catch(t){return console.warn("react-leaflet not available, LocationPicker will be disabled:",t),!1}};function E({onLocationSelect:i,position:s}){const[n,a]=c.useState(s);if(!p||typeof p!="function"||!f||typeof f!="function")return null;let r;try{r=p()}catch(t){return console.error("useMap hook error:",t),null}try{f({click(t){const{lat:l,lng:o}=t.latlng;a([l,o]),i({lat:l,lng:o})}})}catch(t){return console.error("useMapEvents error:",t),null}c.useEffect(()=>{s&&r&&(a(s),r.setView(s,r.getZoom()))},[s,r]);const m=t=>{const{lat:l,lng:o}=t.target.getLatLng();a([l,o]),i({lat:l,lng:o})};return!j||!v?null:n?e.jsx(j,{position:n,draggable:!0,eventHandlers:{dragend:m},children:e.jsx(v,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold",children:"Selected Location"}),e.jsxs("p",{className:"text-gray-600",children:[n[0].toFixed(4),", ",n[1].toFixed(4)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Drag marker to adjust"})]})})}):null}const V=({onLocationSelect:i,initialPosition:s=[20.5937,78.9629],zoom:n=5,height:a=400})=>{const[r,m]=c.useState(null),[t,l]=c.useState(!1),[o,L]=c.useState(!1),[N,g]=c.useState(!1);c.useEffect(()=>{L(!0),typeof window<"u"?_().then(d=>{g(d)}).catch(d=>{console.warn("Failed to load react-leaflet, showing placeholder:",d),g(!1)}):g(!1)},[]);const k=async({lat:d,lng:y})=>{m([d,y]),l(!0);try{i&&await i({lat:d,lng:y})}catch(M){console.error("Error handling location select:",M)}finally{l(!1)}};if(!o||!N||!x||!h)return e.jsx("div",{className:"w-full rounded-xl overflow-hidden border-2 border-gray-200 shadow-lg",children:e.jsx("div",{className:"relative bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",style:{height:`${a}px`},children:e.jsxs("div",{className:"text-center p-8 max-w-md",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Interactive Map"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Live interactive map will be integrated soon."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please use the location fields above to enter coordinates manually."})]})})});if(typeof x!="function"||typeof h!="function")return console.error("MapContainer or TileLayer is not a function, showing placeholder"),e.jsx("div",{className:"w-full rounded-xl overflow-hidden border-2 border-gray-200 shadow-lg",children:e.jsx("div",{className:"relative bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",style:{height:`${a}px`},children:e.jsxs("div",{className:"text-center p-8 max-w-md",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Interactive Map"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Live interactive map will be integrated soon."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please use the location fields above to enter coordinates manually."})]})})});try{return e.jsxs("div",{className:"w-full rounded-xl overflow-hidden border-2 border-gray-200 shadow-lg",children:[e.jsx("style",{children:`
          .leaflet-container {
            height: 100%;
            width: 100%;
          }
          .leaflet-control-attribution {
            display: none !important;
          }
        `}),e.jsxs("div",{className:"relative",style:{height:`${a}px`},children:[e.jsxs(x,{center:s,zoom:n,style:{height:"100%",width:"100%",zIndex:0},scrollWheelZoom:!0,children:[e.jsx(h,{attribution:"",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(E,{onLocationSelect:k,position:r})]},`map-${o}`),t&&e.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-lg shadow-md z-[1000]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Loading location..."})]})}),!r&&e.jsxs("div",{className:"absolute top-4 left-4 bg-blue-500/90 backdrop-blur-sm text-white px-4 py-2 rounded-lg shadow-md z-[1000] max-w-xs",children:[e.jsx("p",{className:"text-sm font-medium",children:"Click on the map to select a location"}),e.jsx("p",{className:"text-xs text-blue-100 mt-1",children:"You can drag the marker to adjust"})]})]})]})}catch(d){return console.warn("Map rendering error, showing placeholder:",d),e.jsx("div",{className:"w-full rounded-xl overflow-hidden border-2 border-gray-200 shadow-lg",children:e.jsx("div",{className:"relative bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center",style:{height:`${a}px`},children:e.jsxs("div",{className:"text-center p-8 max-w-md",children:[e.jsx("div",{className:"mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Interactive Map"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Live interactive map will be integrated soon."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please use the location fields above to enter coordinates manually."})]})})})}};export{V as default};
